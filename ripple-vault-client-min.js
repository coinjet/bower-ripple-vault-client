!function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t){(function(e){!function(){function r(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(n,arguments)}}var n,o,i={};n=this,null!=n&&(o=n.async),i.noConflict=function(){return n.async=o,i};var s=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===s.call(e)},u=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r+=1)t(e[r],r,e)},l=function(e,t){if(e.map)return e.map(t);var r=[];return u(e,function(e,n,o){r.push(t(e,n,o))}),r},c=function(e,t,r){return e.reduce?e.reduce(t,r):(u(e,function(e,n,o){r=t(r,e,n,o)}),r)},f=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};"undefined"!=typeof e&&e.nextTick?(i.nextTick=e.nextTick,i.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:i.nextTick):"function"==typeof setImmediate?(i.nextTick=function(e){setImmediate(e)},i.setImmediate=i.nextTick):(i.nextTick=function(e){setTimeout(e,0)},i.setImmediate=i.nextTick),i.each=function(e,t,n){function o(t){t?(n(t),n=function(){}):(i+=1,i>=e.length&&n())}if(n=n||function(){},!e.length)return n();var i=0;u(e,function(e){t(e,r(o))})},i.forEach=i.each,i.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,o=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():o())})};o()},i.forEachSeries=i.eachSeries,i.eachLimit=function(e,t,r,n){var o=d(t);o.apply(null,[e,r,n])},i.forEachLimit=i.eachLimit;var d=function(e){return function(t,r,n){if(n=n||function(){},!t.length||0>=e)return n();var o=0,i=0,s=0;!function a(){if(o>=t.length)return n();for(;e>s&&i<t.length;)i+=1,s+=1,r(t[i-1],function(e){e?(n(e),n=function(){}):(o+=1,s-=1,o>=t.length?n():a())})}()}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.each].concat(t))}},h=function(e,t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[d(e)].concat(r))}},y=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[i.eachSeries].concat(t))}},m=function(e,t,r,n){if(t=l(t,function(e,t){return{index:t,value:e}}),n){var o=[];e(t,function(e,t){r(e.value,function(r,n){o[e.index]=n,t(r)})},function(e){n(e,o)})}else e(t,function(e,t){r(e.value,function(e){t(e)})})};i.map=p(m),i.mapSeries=y(m),i.mapLimit=function(e,t,r,n){return b(t)(e,r,n)};var b=function(e){return h(e,m)};i.reduce=function(e,t,r,n){i.eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(e,t,r,n){var o=l(e,function(e){return e}).reverse();i.reduce(o,t,r,n)},i.foldr=i.reduceRight;var g=function(e,t,r,n){var o=[];t=l(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r&&o.push(e),t()})},function(){n(l(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.filter=p(g),i.filterSeries=y(g),i.select=i.filter,i.selectSeries=i.filterSeries;var v=function(e,t,r,n){var o=[];t=l(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r||o.push(e),t()})},function(){n(l(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};i.reject=p(v),i.rejectSeries=y(v);var w=function(e,t,r,n){e(t,function(e,t){r(e,function(r){r?(n(e),n=function(){}):t()})},function(){n()})};i.detect=p(w),i.detectSeries=y(w),i.some=function(e,t,r){i.each(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(){r(!1)})},i.any=i.some,i.every=function(e,t,r){i.each(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(){r(!0)})},i.all=i.every,i.sortBy=function(e,t,r){i.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);var n=function(e,t){var r=e.criteria,n=t.criteria;return n>r?-1:r>n?1:0};r(null,l(t.sort(n),function(e){return e.value}))})},i.auto=function(e,t){t=t||function(){};var r=f(e),n=r.length;if(!n)return t();var o={},s=[],l=function(e){s.unshift(e)},d=function(e){for(var t=0;t<s.length;t+=1)if(s[t]===e)return void s.splice(t,1)},p=function(){n--,u(s.slice(0),function(e){e()})};l(function(){if(!n){var e=t;t=function(){},e(null,o)}}),u(r,function(r){var n=a(e[r])?e[r]:[e[r]],s=function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),e){var s={};u(f(o),function(e){s[e]=o[e]}),s[r]=n,t(e,s),t=function(){}}else o[r]=n,i.setImmediate(p)},h=n.slice(0,Math.abs(n.length-1))||[],y=function(){return c(h,function(e,t){return e&&o.hasOwnProperty(t)},!0)&&!o.hasOwnProperty(r)};if(y())n[n.length-1](s,o);else{var m=function(){y()&&(d(m),n[n.length-1](s,o))};l(m)}})},i.retry=function(e,t,r){var n=5,o=[];"function"==typeof e&&(r=t,t=e,e=n),e=parseInt(e,10)||n;var s=function(n,s){for(var a=function(e,t){return function(r){e(function(e,n){r(!e||t,{err:e,result:n})},s)}};e;)o.push(a(t,!(e-=1)));i.series(o,function(e,t){t=t[t.length-1],(n||r)(t.err,t.result)})};return r?s():s},i.waterfall=function(e,t){if(t=t||function(){},!a(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),s=e.next();o.push(s?n(s):t),i.setImmediate(function(){e.apply(null,o)})}}};n(i.iterator(e))()};var _=function(e,t,r){if(r=r||function(){},a(t))e.map(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},r);else{var n={};e.each(f(t),function(e,r){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[e]=o,r(t)})},function(e){r(e,n)})}};i.parallel=function(e,t){_({map:i.map,each:i.each},e,t)},i.parallelLimit=function(e,t,r){_({map:b(t),each:d(t)},e,r)},i.series=function(e,t){if(t=t||function(){},a(e))i.mapSeries(e,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},t);else{var r={};i.eachSeries(f(e),function(t,n){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[t]=o,n(e)})},function(e){t(e,r)})}},i.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()};return n.next=function(){return r<e.length-1?t(r+1):null},n};return t(0)},i.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var E=function(e,t,r,n){var o=[];e(t,function(e,t){r(e,function(e,r){o=o.concat(r||[]),t(e)})},function(e){n(e,o)})};i.concat=p(E),i.concatSeries=y(E),i.whilst=function(e,t,r){e()?t(function(n){return n?r(n):void i.whilst(e,t,r)}):r()},i.doWhilst=function(e,t,r){e(function(n){if(n)return r(n);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?i.doWhilst(e,t,r):r()})},i.until=function(e,t,r){e()?r():t(function(n){return n?r(n):void i.until(e,t,r)})},i.doUntil=function(e,t,r){e(function(n){if(n)return r(n);var o=Array.prototype.slice.call(arguments,1);t.apply(null,o)?r():i.doUntil(e,t,r)})},i.queue=function(e,t){function n(e,t,r,n){return e.started||(e.started=!0),a(t)||(t=[t]),0==t.length?i.setImmediate(function(){e.drain&&e.drain()}):void u(t,function(t){var o={data:t,callback:"function"==typeof n?n:null};r?e.tasks.unshift(o):e.tasks.push(o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),i.setImmediate(e.process)})}void 0===t&&(t=1);var o=0,s={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(s,e,!1,t)},kill:function(){s.drain=null,s.tasks=[]},unshift:function(e,t){n(s,e,!0,t)},process:function(){if(!s.paused&&o<s.concurrency&&s.tasks.length){var t=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),o+=1;var n=function(){o-=1,t.callback&&t.callback.apply(t,arguments),s.drain&&s.tasks.length+o===0&&s.drain(),s.process()},i=r(n);e(t.data,i)}},length:function(){return s.tasks.length},running:function(){return o},idle:function(){return s.tasks.length+o===0},pause:function(){s.paused!==!0&&(s.paused=!0,s.process())},resume:function(){s.paused!==!1&&(s.paused=!1,s.process())}};return s},i.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(e,t,r){for(var n=-1,o=e.length-1;o>n;){var i=n+(o-n+1>>>1);r(t,e[i])>=0?n=i:o=i-1}return n}function o(e,t,o,s){return e.started||(e.started=!0),a(t)||(t=[t]),0==t.length?i.setImmediate(function(){e.drain&&e.drain()}):void u(t,function(t){var a={data:t,priority:o,callback:"function"==typeof s?s:null};e.tasks.splice(n(e.tasks,a,r)+1,0,a),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),i.setImmediate(e.process)})}var s=i.queue(e,t);return s.push=function(e,t,r){o(s,e,t,r)},delete s.unshift,s},i.cargo=function(e,t){var r=!1,n=[],o={tasks:n,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,r){a(e)||(e=[e]),u(e,function(e){n.push({data:e,callback:"function"==typeof r?r:null}),o.drained=!1,o.saturated&&n.length===t&&o.saturated()}),i.setImmediate(o.process)},process:function s(){if(!r){if(0===n.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var i="number"==typeof t?n.splice(0,t):n.splice(0,n.length),a=l(i,function(e){return e.data});o.empty&&o.empty(),r=!0,e(a,function(){r=!1;var e=arguments;u(i,function(t){t.callback&&t.callback.apply(null,e)}),s()})}},length:function(){return n.length},running:function(){return r}};return o};var k=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&u(r,function(t){console[e](t)}))}]))}};i.log=k("log"),i.dir=k("dir"),i.memoize=function(e,t){var r={},n={};t=t||function(e){return e};var o=function(){var o=Array.prototype.slice.call(arguments),s=o.pop(),a=t.apply(null,o);a in r?i.nextTick(function(){s.apply(null,r[a])}):a in n?n[a].push(s):(n[a]=[s],e.apply(null,o.concat([function(){r[a]=arguments;var e=n[a];delete n[a];for(var t=0,o=e.length;o>t;t++)e[t].apply(null,arguments)}])))};return o.memo=r,o.unmemoized=e,o},i.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},i.times=function(e,t,r){for(var n=[],o=0;e>o;o++)n.push(o);return i.map(n,t,r)},i.timesSeries=function(e,t,r){for(var n=[],o=0;e>o;o++)n.push(o);return i.mapSeries(n,t,r)},i.seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();i.reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},i.compose=function(){return i.seq.apply(null,Array.prototype.reverse.call(arguments))};var A=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),o=n.pop();return e(t,function(e,t){e.apply(r,n.concat([t]))},o)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};i.applyEach=p(A),i.applyEachSeries=y(A),i.forever=function(e,t){function r(n){if(n){if(t)return t(n);throw n}e(r)}r()},"undefined"!=typeof t&&t.exports?t.exports=i:"undefined"!=typeof define&&define.amd?define([],function(){return i}):n.async=i}()}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/async/lib/async.js","/../node_modules/async/lib")},{"1YiZ5S":6,buffer:3}],2:[function(e,t){(function(){var e,r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(t){"use strict";if(!t||"[object Object]"!==n.call(t))return!1;var o=r.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!i)return!1;var s;for(s in t);return s===e||r.call(t,s)};t.exports=function i(){"use strict";var t,r,n,s,a,u,l=arguments[0],c=1,f=arguments.length,d=!1;for("boolean"==typeof l?(d=l,l=arguments[1]||{},c=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});f>c;++c)if(t=arguments[c],null!=t)for(r in t)n=l[r],s=t[r],l!==s&&(d&&s&&(o(s)||(a=Array.isArray(s)))?(a?(a=!1,u=n&&Array.isArray(n)?n:[]):u=n&&o(n)?n:{},l[r]=i(d,u,s)):s!==e&&(l[r]=s));return l}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/extend/index.js","/../node_modules/extend")},{"1YiZ5S":6,buffer:3}],3:[function(e,t,r){(function(t,n,o){function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var n=typeof e;if("base64"===t&&"string"===n)for(e=j(e);e.length%4!==0;)e+="=";var i;if("number"===n)i=U(e);else if("string"===n)i=o.byteLength(e,t);else{if("object"!==n)throw new Error("First argument needs to be a number, array or string.");i=U(e.length)}var s;o._useTypedArrays?s=o._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(o._useTypedArrays&&"number"==typeof e.byteLength)s._set(e);else if(L(e))for(a=0;i>a;a++)s[a]=o.isBuffer(e)?e.readUInt8(a):e[a];else if("string"===n)s.write(e,0,t);else if("number"===n&&!o._useTypedArrays&&!r)for(a=0;i>a;a++)s[a]=0;return s}function i(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=t.length;N(s%2===0,"Invalid hex string"),n>s/2&&(n=s/2);for(var a=0;n>a;a++){var u=parseInt(t.substr(2*a,2),16);N(!isNaN(u),"Invalid hex string"),e[r+a]=u}return o._charsWritten=2*a,a}function s(e,t,r,n){var i=o._charsWritten=M(q(t),e,r,n);return i}function a(e,t,r,n){var i=o._charsWritten=M(P(t),e,r,n);return i}function u(e,t,r,n){return a(e,t,r,n)}function l(e,t,r,n){var i=o._charsWritten=M(F(t),e,r,n);return i}function c(e,t,r,n){var i=o._charsWritten=M(R(t),e,r,n);return i}function f(e,t,r){return K.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function d(e,t,r){var n="",o="";r=Math.min(e.length,r);for(var i=t;r>i;i++)e[i]<=127?(n+=D(o)+String.fromCharCode(e[i]),o=""):o+="%"+e[i].toString(16);return n+D(o)}function p(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;r>o;o++)n+=String.fromCharCode(e[o]);return n}function h(e,t,r){return p(e,t,r)}function y(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=t;r>i;i++)o+=O(e[i]);return o}function m(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function b(e,t,r,n){n||(N("boolean"==typeof r,"missing or invalid endian"),N(void 0!==t&&null!==t,"missing offset"),N(t+1<e.length,"Trying to read beyond buffer length"));var o=e.length;if(!(t>=o)){var i;return r?(i=e[t],o>t+1&&(i|=e[t+1]<<8)):(i=e[t]<<8,o>t+1&&(i|=e[t+1])),i}}function g(e,t,r,n){n||(N("boolean"==typeof r,"missing or invalid endian"),N(void 0!==t&&null!==t,"missing offset"),N(t+3<e.length,"Trying to read beyond buffer length"));var o=e.length;if(!(t>=o)){var i;return r?(o>t+2&&(i=e[t+2]<<16),o>t+1&&(i|=e[t+1]<<8),i|=e[t],o>t+3&&(i+=e[t+3]<<24>>>0)):(o>t+1&&(i=e[t+1]<<16),o>t+2&&(i|=e[t+2]<<8),o>t+3&&(i|=e[t+3]),i+=e[t]<<24>>>0),i}}function v(e,t,r,n){n||(N("boolean"==typeof r,"missing or invalid endian"),N(void 0!==t&&null!==t,"missing offset"),N(t+1<e.length,"Trying to read beyond buffer length"));var o=e.length;if(!(t>=o)){var i=b(e,t,r,!0),s=32768&i;return s?-1*(65535-i+1):i}}function w(e,t,r,n){n||(N("boolean"==typeof r,"missing or invalid endian"),N(void 0!==t&&null!==t,"missing offset"),N(t+3<e.length,"Trying to read beyond buffer length"));var o=e.length;if(!(t>=o)){var i=g(e,t,r,!0),s=2147483648&i;return s?-1*(4294967295-i+1):i}}function _(e,t,r,n){return n||(N("boolean"==typeof r,"missing or invalid endian"),N(t+3<e.length,"Trying to read beyond buffer length")),X.read(e,t,r,23,4)}function E(e,t,r,n){return n||(N("boolean"==typeof r,"missing or invalid endian"),N(t+7<e.length,"Trying to read beyond buffer length")),X.read(e,t,r,52,8)}function k(e,t,r,n,o){o||(N(void 0!==t&&null!==t,"missing value"),N("boolean"==typeof n,"missing or invalid endian"),N(void 0!==r&&null!==r,"missing offset"),N(r+1<e.length,"trying to write beyond buffer length"),Z(t,65535));var i=e.length;if(!(r>=i))for(var s=0,a=Math.min(i-r,2);a>s;s++)e[r+s]=(t&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function A(e,t,r,n,o){o||(N(void 0!==t&&null!==t,"missing value"),N("boolean"==typeof n,"missing or invalid endian"),N(void 0!==r&&null!==r,"missing offset"),N(r+3<e.length,"trying to write beyond buffer length"),Z(t,4294967295));var i=e.length;if(!(r>=i))for(var s=0,a=Math.min(i-r,4);a>s;s++)e[r+s]=t>>>8*(n?s:3-s)&255}function S(e,t,r,n,o){o||(N(void 0!==t&&null!==t,"missing value"),N("boolean"==typeof n,"missing or invalid endian"),N(void 0!==r&&null!==r,"missing offset"),N(r+1<e.length,"Trying to write beyond buffer length"),H(t,32767,-32768));var i=e.length;r>=i||(t>=0?k(e,t,r,n,o):k(e,65535+t+1,r,n,o))}function x(e,t,r,n,o){o||(N(void 0!==t&&null!==t,"missing value"),N("boolean"==typeof n,"missing or invalid endian"),N(void 0!==r&&null!==r,"missing offset"),N(r+3<e.length,"Trying to write beyond buffer length"),H(t,2147483647,-2147483648));var i=e.length;r>=i||(t>=0?A(e,t,r,n,o):A(e,4294967295+t+1,r,n,o))}function B(e,t,r,n,o){o||(N(void 0!==t&&null!==t,"missing value"),N("boolean"==typeof n,"missing or invalid endian"),N(void 0!==r&&null!==r,"missing offset"),N(r+3<e.length,"Trying to write beyond buffer length"),Y(t,3.4028234663852886e38,-3.4028234663852886e38));var i=e.length;r>=i||X.write(e,t,r,n,23,4)}function I(e,t,r,n,o){o||(N(void 0!==t&&null!==t,"missing value"),N("boolean"==typeof n,"missing or invalid endian"),N(void 0!==r&&null!==r,"missing offset"),N(r+7<e.length,"Trying to write beyond buffer length"),Y(t,1.7976931348623157e308,-1.7976931348623157e308));var i=e.length;r>=i||X.write(e,t,r,n,52,8)}function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function T(e,t,r){return"number"!=typeof e?r:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function U(e){return e=~~Math.ceil(+e),0>e?0:e}function C(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function L(e){return C(e)||o.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function O(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(e.charCodeAt(r));else{var o=r;n>=55296&&57343>=n&&r++;for(var i=encodeURIComponent(e.slice(o,r+1)).substr(1).split("%"),s=0;s<i.length;s++)t.push(parseInt(i[s],16))}}return t}function P(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function R(e){for(var t,r,n,o=[],i=0;i<e.length;i++)t=e.charCodeAt(i),r=t>>8,n=t%256,o.push(n),o.push(r);return o}function F(e){return K.toByteArray(e)}function M(e,t,r,n){for(var o=0;n>o&&!(o+r>=t.length||o>=e.length);o++)t[o+r]=e[o];return o}function D(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function Z(e,t){N("number"==typeof e,"cannot write a non-number as a number"),N(e>=0,"specified a negative value for writing an unsigned value"),N(t>=e,"value is larger than maximum value for type"),N(Math.floor(e)===e,"value has a fractional component")}function H(e,t,r){N("number"==typeof e,"cannot write a non-number as a number"),N(t>=e,"value larger than maximum allowed value"),N(e>=r,"value smaller than minimum allowed value"),N(Math.floor(e)===e,"value has a fractional component")}function Y(e,t,r){N("number"==typeof e,"cannot write a non-number as a number"),N(t>=e,"value larger than maximum allowed value"),N(e>=r,"value smaller than minimum allowed value")}function N(e,t){if(!e)throw new Error(t||"Failed assertion")}var K=e("base64-js"),X=e("ieee754");r.Buffer=o,r.SlowBuffer=o,r.INSPECT_MAX_BYTES=50,o.poolSize=8192,o._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(r){return!1}}(),o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},o.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=q(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=F(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},o.concat=function(e,t){if(N(C(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new o(0);if(1===e.length)return e[0];var r;if("number"!=typeof t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new o(t),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(n,i),i+=s.length}return n},o.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var o=n;n=t,t=r,r=o}t=Number(t)||0;var f=this.length-t;r?(r=Number(r),r>f&&(r=f)):r=f,n=String(n||"utf8").toLowerCase();var d;switch(n){case"hex":d=i(this,e,t,r);break;case"utf8":case"utf-8":d=s(this,e,t,r);break;case"ascii":d=a(this,e,t,r);break;case"binary":d=u(this,e,t,r);break;case"base64":d=l(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=c(this,e,t,r);break;default:throw new Error("Unknown encoding")}return d},o.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0!==r?Number(r):r=n.length,r===t)return"";var o;switch(e){case"hex":o=y(n,t,r);break;case"utf8":case"utf-8":o=d(n,t,r);break;case"ascii":o=p(n,t,r);break;case"binary":o=h(n,t,r);break;case"base64":o=f(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=m(n,t,r);break;default:throw new Error("Unknown encoding")}return o},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.copy=function(e,t,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==i.length){N(n>=r,"sourceEnd < sourceStart"),N(t>=0&&t<e.length,"targetStart out of bounds"),N(r>=0&&r<i.length,"sourceStart out of bounds"),N(n>=0&&n<=i.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;if(100>s||!o._useTypedArrays)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t)}},o.prototype.slice=function(e,t){var r=this.length;if(e=T(e,r,0),t=T(t,r,r),o._useTypedArrays)return o._augment(this.subarray(e,t));for(var n=t-e,i=new o(n,void 0,!0),s=0;n>s;s++)i[s]=this[s+e];return i},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.readUInt8=function(e,t){return t||(N(void 0!==e&&null!==e,"missing offset"),N(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},o.prototype.readUInt16LE=function(e,t){return b(this,e,!0,t)},o.prototype.readUInt16BE=function(e,t){return b(this,e,!1,t)},o.prototype.readUInt32LE=function(e,t){return g(this,e,!0,t)},o.prototype.readUInt32BE=function(e,t){return g(this,e,!1,t)},o.prototype.readInt8=function(e,t){if(t||(N(void 0!==e&&null!==e,"missing offset"),N(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},o.prototype.readInt16LE=function(e,t){return v(this,e,!0,t)},o.prototype.readInt16BE=function(e,t){return v(this,e,!1,t)},o.prototype.readInt32LE=function(e,t){return w(this,e,!0,t)},o.prototype.readInt32BE=function(e,t){return w(this,e,!1,t)},o.prototype.readFloatLE=function(e,t){return _(this,e,!0,t)},o.prototype.readFloatBE=function(e,t){return _(this,e,!1,t)},o.prototype.readDoubleLE=function(e,t){return E(this,e,!0,t)},o.prototype.readDoubleBE=function(e,t){return E(this,e,!1,t)},o.prototype.writeUInt8=function(e,t,r){r||(N(void 0!==e&&null!==e,"missing value"),N(void 0!==t&&null!==t,"missing offset"),N(t<this.length,"trying to write beyond buffer length"),Z(e,255)),t>=this.length||(this[t]=e)},o.prototype.writeUInt16LE=function(e,t,r){k(this,e,t,!0,r)},o.prototype.writeUInt16BE=function(e,t,r){k(this,e,t,!1,r)},o.prototype.writeUInt32LE=function(e,t,r){A(this,e,t,!0,r)},o.prototype.writeUInt32BE=function(e,t,r){A(this,e,t,!1,r)},o.prototype.writeInt8=function(e,t,r){r||(N(void 0!==e&&null!==e,"missing value"),N(void 0!==t&&null!==t,"missing offset"),N(t<this.length,"Trying to write beyond buffer length"),H(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r))},o.prototype.writeInt16LE=function(e,t,r){S(this,e,t,!0,r)},o.prototype.writeInt16BE=function(e,t,r){S(this,e,t,!1,r)},o.prototype.writeInt32LE=function(e,t,r){x(this,e,t,!0,r)},o.prototype.writeInt32BE=function(e,t,r){x(this,e,t,!1,r)},o.prototype.writeFloatLE=function(e,t,r){B(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){B(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){I(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){I(this,e,t,!1,r)},o.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),N("number"==typeof e&&!isNaN(e),"value is not a number"),N(r>=t,"end < start"),r!==t&&0!==this.length){N(t>=0&&t<this.length,"start out of bounds"),N(r>=0&&r<=this.length,"end out of bounds");for(var n=t;r>n;n++)this[n]=e}},o.prototype.inspect=function(){for(var e=[],t=this.length,n=0;t>n;n++)if(e[n]=O(this[n]),n===r.INSPECT_MAX_BYTES){e[n+1]="...";break}return"<Buffer "+e.join(" ")+">"},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o._useTypedArrays)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var J=o.prototype;o._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=J.get,e.set=J.set,e.write=J.write,e.toString=J.toString,e.toLocaleString=J.toString,e.toJSON=J.toJSON,e.copy=J.copy,e.slice=J.slice,e.readUInt8=J.readUInt8,e.readUInt16LE=J.readUInt16LE,e.readUInt16BE=J.readUInt16BE,e.readUInt32LE=J.readUInt32LE,e.readUInt32BE=J.readUInt32BE,e.readInt8=J.readInt8,e.readInt16LE=J.readInt16LE,e.readInt16BE=J.readInt16BE,e.readInt32LE=J.readInt32LE,e.readInt32BE=J.readInt32BE,e.readFloatLE=J.readFloatLE,e.readFloatBE=J.readFloatBE,e.readDoubleLE=J.readDoubleLE,e.readDoubleBE=J.readDoubleBE,e.writeUInt8=J.writeUInt8,e.writeUInt16LE=J.writeUInt16LE,e.writeUInt16BE=J.writeUInt16BE,e.writeUInt32LE=J.writeUInt32LE,e.writeUInt32BE=J.writeUInt32BE,e.writeInt8=J.writeInt8,e.writeInt16LE=J.writeInt16LE,e.writeInt16BE=J.writeInt16BE,e.writeInt32LE=J.writeInt32LE,e.writeInt32BE=J.writeInt32BE,e.writeFloatLE=J.writeFloatLE,e.writeFloatBE=J.writeFloatBE,e.writeDoubleLE=J.writeDoubleLE,e.writeDoubleBE=J.writeDoubleBE,e.fill=J.fill,e.inspect=J.inspect,e.toArrayBuffer=J.toArrayBuffer,e}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/index.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer")},{"1YiZ5S":6,"base64-js":4,buffer:3,ieee754:5}],4:[function(e,t,r){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(e){var t=e.charCodeAt(0);return t===s?62:t===a?63:u>t?-1:u+10>t?t-u+26+26:c+26>t?t-c:l+26>t?t-l+26:void 0}function n(e){function t(e){l[f++]=e}var n,o,s,a,u,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;u="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new i(3*e.length/4-u),s=u>0?e.length-4:e.length;var f=0;for(n=0,o=0;s>n;n+=4,o+=3)a=r(e.charAt(n))<<18|r(e.charAt(n+1))<<12|r(e.charAt(n+2))<<6|r(e.charAt(n+3)),t((16711680&a)>>16),t((65280&a)>>8),t(255&a);return 2===u?(a=r(e.charAt(n))<<2|r(e.charAt(n+1))>>4,t(255&a)):1===u&&(a=r(e.charAt(n))<<10|r(e.charAt(n+1))<<4|r(e.charAt(n+2))>>2,t(a>>8&255),t(255&a)),l}function o(t){function r(t){return e.charAt(t)}function n(e){return r(e>>18&63)+r(e>>12&63)+r(e>>6&63)+r(63&e)}var o,i,s,a=t.length%3,u="";for(o=0,s=t.length-a;s>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=n(i);switch(a){case 1:i=t[t.length-1],u+=r(i>>2),u+=r(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=r(i>>10),u+=r(i>>4&63),u+=r(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}("undefined"==typeof r?this.base64js={}:r)}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib")},{"1YiZ5S":6,buffer:3}],5:[function(e,t,r){(function(){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,l=u>>1,c=-7,f=r?o-1:0,d=r?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=a;c>0;i=256*i+e[t+f],f+=d,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+e[t+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,n),i-=l}return(p?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,y=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+f>=1?d/u:d*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*u-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=h,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[r+p]=255&s,p+=h,s/=256,l-=8);e[r+p-h]|=128*y}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754")},{"1YiZ5S":6,buffer:3}],6:[function(e,t){(function(e){function r(){}var e=t.exports={};e.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=r,e.addListener=r,e.once=r,e.off=r,e.removeListener=r,e.removeAllListeners=r,e.emit=r,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")
}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/process/browser.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/process")},{"1YiZ5S":6,buffer:3}],7:[function(e,t,r){(function(e,n){!function(e){function o(e){throw RangeError(L[e])}function i(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e}function s(e,t){return i(e.split(C),t).join(".")}function a(e){for(var t,r,n=[],o=0,i=e.length;i>o;)t=e.charCodeAt(o++),t>=55296&&56319>=t&&i>o?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function u(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function l(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function f(e,t,r){var n=0;for(e=r?q(e/x):e>>1,e+=q(e/t);e>O*A>>1;n+=E)e=q(e/O);return q(n+(O+1)*e/(e+S))}function d(e){var t,r,n,i,s,a,c,d,p,h,y=[],m=e.length,b=0,g=I,v=B;for(r=e.lastIndexOf(j),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&o("not-basic"),y.push(e.charCodeAt(n));for(i=r>0?r+1:0;m>i;){for(s=b,a=1,c=E;i>=m&&o("invalid-input"),d=l(e.charCodeAt(i++)),(d>=E||d>q((_-b)/a))&&o("overflow"),b+=d*a,p=v>=c?k:c>=v+A?A:c-v,!(p>d);c+=E)h=E-p,a>q(_/h)&&o("overflow"),a*=h;t=y.length+1,v=f(b-s,t,0==s),q(b/t)>_-g&&o("overflow"),g+=q(b/t),b%=t,y.splice(b++,0,g)}return u(y)}function p(e){var t,r,n,i,s,u,l,d,p,h,y,m,b,g,v,w=[];for(e=a(e),m=e.length,t=I,r=0,s=B,u=0;m>u;++u)y=e[u],128>y&&w.push(P(y));for(n=i=w.length,i&&w.push(j);m>n;){for(l=_,u=0;m>u;++u)y=e[u],y>=t&&l>y&&(l=y);for(b=n+1,l-t>q((_-r)/b)&&o("overflow"),r+=(l-t)*b,t=l,u=0;m>u;++u)if(y=e[u],t>y&&++r>_&&o("overflow"),y==t){for(d=r,p=E;h=s>=p?k:p>=s+A?A:p-s,!(h>d);p+=E)v=d-h,g=E-h,w.push(P(c(h+v%g,0))),d=q(v/g);w.push(P(c(d,0))),s=f(r,b,n==i),r=0,++n}++r,++t}return w.join("")}function h(e){return s(e,function(e){return T.test(e)?d(e.slice(4).toLowerCase()):e})}function y(e){return s(e,function(e){return U.test(e)?"xn--"+p(e):e})}var m="object"==typeof r&&r,b="object"==typeof t&&t&&t.exports==m&&t,g="object"==typeof n&&n;(g.global===g||g.window===g)&&(e=g);var v,w,_=2147483647,E=36,k=1,A=26,S=38,x=700,B=72,I=128,j="-",T=/^xn--/,U=/[^ -~]/,C=/\x2E|\u3002|\uFF0E|\uFF61/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=E-k,q=Math.floor,P=String.fromCharCode;if(v={version:"1.2.4",ucs2:{decode:a,encode:u},decode:d,encode:p,toASCII:y,toUnicode:h},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return v});else if(m&&!m.nodeType)if(b)b.exports=v;else for(w in v)v.hasOwnProperty(w)&&(m[w]=v[w]);else e.punycode=v}(this)}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/punycode/punycode.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/punycode")},{"1YiZ5S":6,buffer:3}],8:[function(e,t){(function(){"use strict";function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(t,n,o,i){n=n||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(n);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;l>c;++c){var f,d,p,h,y=t[c].replace(a,"%20"),m=y.indexOf(o);m>=0?(f=y.substr(0,m),d=y.substr(m+1)):(f=y,d=""),p=decodeURIComponent(f),h=decodeURIComponent(d),e(s,p)?r(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/querystring-es3/decode.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/querystring-es3")},{"1YiZ5S":6,buffer:3}],9:[function(e,t){(function(){"use strict";function e(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(t,i,s,a){return i=i||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t?e(o(t),function(e){var o=encodeURIComponent(r(e))+s;return n(t[e])?t[e].map(function(e){return o+encodeURIComponent(r(e))}).join(i):o+encodeURIComponent(r(t[e]))}).join(i):a?encodeURIComponent(r(a))+s+encodeURIComponent(r(t)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/querystring-es3/encode.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/querystring-es3")},{"1YiZ5S":6,buffer:3}],10:[function(e,t,r){(function(){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/querystring-es3/index.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/querystring-es3")},{"./decode":8,"./encode":9,"1YiZ5S":6,buffer:3}],11:[function(e,t,r){(function(){function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(e,r,n){if(e&&u(e)&&e instanceof t)return e;var o=new t;return o.parse(e,r,n),o}function o(e){return a(e)&&(e=n(e)),e instanceof t?e.format():t.prototype.format.call(e)}function i(e,t){return n(e,!1,!0).resolve(t)}function s(e,t){return e?n(e,!1,!0).resolveObject(t):t}function a(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function c(e){return null==e}var f=e("punycode");r.parse=n,r.resolve=i,r.resolveObject=s,r.format=o,r.Url=t;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,h=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(h),m=["'"].concat(y),b=["%","/","?",";","#"].concat(m),g=["/","?","#"],v=255,w=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");t.prototype.parse=function(e,t,r){if(!a(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var o=d.exec(n);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||o&&k[o]||(n=n.substr(2),this.slashes=!0)}if(!k[o]&&(s||o&&!A[o])){for(var u=-1,l=0;l<g.length;l++){var c=n.indexOf(g[l]);-1!==c&&(-1===u||u>c)&&(u=c)}var p,h;h=-1===u?n.lastIndexOf("@"):n.lastIndexOf("@",u),-1!==h&&(p=n.slice(0,h),n=n.slice(h+1),this.auth=decodeURIComponent(p)),u=-1;for(var l=0;l<b.length;l++){var c=n.indexOf(b[l]);-1!==c&&(-1===u||u>c)&&(u=c)}-1===u&&(u=n.length),this.host=n.slice(0,u),n=n.slice(u),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var x=this.hostname.split(/\./),l=0,B=x.length;B>l;l++){var I=x[l];if(I&&!I.match(w)){for(var j="",T=0,U=I.length;U>T;T++)j+=I.charCodeAt(T)>127?"x":I[T];if(!j.match(w)){var C=x.slice(0,l),L=x.slice(l+1),O=I.match(_);O&&(C.push(O[1]),L.unshift(O[2])),L.length&&(n="/"+L.join(".")+n),this.hostname=C.join(".");break}}}if(this.hostname=this.hostname.length>v?"":this.hostname.toLowerCase(),!y){for(var q=this.hostname.split("."),P=[],l=0;l<q.length;++l){var R=q[l];P.push(R.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(R):R)}this.hostname=P.join(".")}var F=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+F,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[i])for(var l=0,B=m.length;B>l;l++){var D=m[l],Z=encodeURIComponent(D);Z===D&&(Z=escape(D)),n=n.split(D).join(Z)}var H=n.indexOf("#");-1!==H&&(this.hash=n.substr(H),n=n.slice(0,H));var Y=n.indexOf("?");if(-1!==Y?(this.search=n.substr(Y),this.query=n.substr(Y+1),t&&(this.query=S.parse(this.query)),n=n.slice(0,Y)):t&&(this.search="",this.query={}),n&&(this.pathname=n),A[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",R=this.search||"";this.path=F+R}return this.href=this.format(),this},t.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(i=S.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||A[t])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+o+r+s+n},t.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},t.prototype.resolveObject=function(e){if(a(e)){var r=new t;r.parse(e,!1,!0),e=r}var n=new t;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),A[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!A[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||k[e.protocol])n.pathname=e.pathname;else{for(var o=(e.pathname||"").split("/");o.length&&!(e.host=o.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var i=n.pathname||"",s=n.search||"";n.path=i+s}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var u=n.pathname&&"/"===n.pathname.charAt(0),f=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=f||u||n.host&&e.pathname,p=d,h=n.pathname&&n.pathname.split("/")||[],o=e.pathname&&e.pathname.split("/")||[],y=n.protocol&&!A[n.protocol];if(y&&(n.hostname="",n.port=null,n.host&&(""===h[0]?h[0]=n.host:h.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===o[0]?o[0]=e.host:o.unshift(e.host)),e.host=null),d=d&&(""===o[0]||""===h[0])),f)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,h=o;else if(o.length)h||(h=[]),h.pop(),h=h.concat(o),n.search=e.search,n.query=e.query;else if(!c(e.search)){if(y){n.hostname=n.host=h.shift();var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!h.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var b=h.slice(-1)[0],g=(n.host||e.host)&&("."===b||".."===b)||""===b,v=0,w=h.length;w>=0;w--)b=h[w],"."==b?h.splice(w,1):".."===b?(h.splice(w,1),v++):v&&(h.splice(w,1),v--);if(!d&&!p)for(;v--;v)h.unshift("..");!d||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift(""),g&&"/"!==h.join("/").substr(-1)&&h.push("");var _=""===h[0]||h[0]&&"/"===h[0].charAt(0);if(y){n.hostname=n.host=_?"":h.length?h.shift():"";var m=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;m&&(n.auth=m.shift(),n.host=n.hostname=m.shift())}return d=d||n.host&&h.length,d&&!_&&h.unshift(""),h.length?n.pathname=h.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},t.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/gulp-browserify/node_modules/browserify/node_modules/url/url.js","/../node_modules/gulp-browserify/node_modules/browserify/node_modules/url")},{"1YiZ5S":6,buffer:3,punycode:7,querystring:10}],12:[function(e,t){(function(){function r(){}function n(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(){if(m.XMLHttpRequest&&("file:"!=m.location.protocol||!m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}function i(e){return e===Object(e)}function s(e){if(!i(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function a(e){for(var t,r,n={},o=e.split("&"),i=0,s=o.length;s>i;++i)r=o[i],t=r.split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n}function u(e){var t,r,n,o,i=e.split(/\r?\n/),s={};i.pop();for(var a=0,u=i.length;u>a;++a)r=i[a],t=r.indexOf(":"),n=r.slice(0,t).toLowerCase(),o=b(r.slice(t+1)),s[n]=o;return s}function l(e){return e.split(/ *; */).shift()}function c(e){return y(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e},{})}function f(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method?this.xhr.responseText:null,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function d(e,t){var r=this;h.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new f(r)}catch(n){e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=n}r.callback(e,t)})}function p(e,t){return"function"==typeof t?new d("GET",e).end(t):1==arguments.length?new d("GET",e):new d(e,t)}var h=e("emitter"),y=e("reduce"),m="undefined"==typeof window?this:window,b="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};p.serializeObject=s,p.parseString=a,p.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},f.prototype.get=function(e){return this.header[e.toLowerCase()]},f.prototype.setHeaderProperties=function(){var e=this.header["content-type"]||"";this.type=l(e);var t=c(e);for(var r in t)this[r]=t[r]},f.prototype.parseBody=function(e){var t=p.parse[this.type];return t&&e&&e.length?t(e):null},f.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},f.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},p.Response=f,h(d.prototype),d.prototype.use=function(e){return e(this),this},d.prototype.timeout=function(e){return this._timeout=e,this},d.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},d.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},d.prototype.set=function(e,t){if(i(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},d.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},d.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},d.prototype.type=function(e){return this.set("Content-Type",p.types[e]||e),this},d.prototype.accept=function(e){return this.set("Accept",p.types[e]||e),this},d.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},d.prototype.query=function(e){return"string"!=typeof e&&(e=s(e)),e&&this._query.push(e),this},d.prototype.field=function(e,t){return this._formData||(this._formData=new FormData),this._formData.append(e,t),this},d.prototype.attach=function(e,t,r){return this._formData||(this._formData=new FormData),this._formData.append(e,t,r),this},d.prototype.send=function(e){var t=i(e),r=this.getHeader("Content-Type");if(t&&i(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(r||this.type("json"),this):this},d.prototype.callback=function(e,t){var r=this._callback;return this.clearTimeout(),2==r.length?r(e,t):e?this.emit("error",e):void r(t)},d.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},d.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},d.prototype.withCredentials=function(){return this._withCredentials=!0,this},d.prototype.end=function(e){var t=this,i=this.xhr=o(),s=this._query.join("&"),a=this._timeout,u=this._formData||this._data;if(this._callback=e||r,i.onreadystatechange=function(){return 4==i.readyState?0==i.status?t.aborted?t.timeoutError():t.crossDomainError():void t.emit("end"):void 0},i.upload&&(i.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)}),a&&!this._timer&&(this._timer=setTimeout(function(){t.abort()},a)),s&&(s=p.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),i.open(this.method,this.url,!0),this._withCredentials&&(i.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof u&&!n(u)){var l=p.serialize[this.getHeader("Content-Type")];l&&(u=l(u))}for(var c in this.header)null!=this.header[c]&&i.setRequestHeader(c,this.header[c]);return this.emit("request",this),i.send(u),this},p.Request=d,p.get=function(e,t,r){var n=p("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},p.head=function(e,t,r){var n=p("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.del=function(e,t){var r=p("DELETE",e);return t&&r.end(t),r},p.patch=function(e,t,r){var n=p("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.post=function(e,t,r){var n=p("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},p.put=function(e,t,r){var n=p("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},t.exports=p}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/superagent/lib/client.js","/../node_modules/superagent/lib")},{"1YiZ5S":6,buffer:3,emitter:13,reduce:14}],13:[function(e,t){(function(){function e(e){return e?r(e):void 0}function r(t){for(var r in e.prototype)t[r]=e.prototype[r];return t}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},e.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},e.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},e.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},e.prototype.hasListeners=function(e){return!!this.listeners(e).length}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/superagent/node_modules/component-emitter/index.js","/../node_modules/superagent/node_modules/component-emitter")},{"1YiZ5S":6,buffer:3}],14:[function(e,t){(function(){t.exports=function(e,t,r){for(var n=0,o=e.length,i=3==arguments.length?r:e[n++];o>n;)i=t.call(null,i,e[n],++n,e);return i}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/../node_modules/superagent/node_modules/reduce-component/index.js","/../node_modules/superagent/node_modules/reduce-component")},{"1YiZ5S":6,buffer:3}],15:[function(e,t,r){(function(){var t=e("async"),n=e("superagent"),o=e("./rippletxt").RippleTxt,i={};i._getRippleTxt=function(e,t){o.get(e,t)},i._getUser=function(e,t){n.get(e,t)},i.get=function(e,r,n){function o(t){s._getRippleTxt(e,function(n,o){if(n)return t(n);if(!o.authinfo_url)return t(new Error("Authentication is not supported on "+e));var i=Array.isArray(o.authinfo_url)?o.authinfo_url[0]:o.authinfo_url;i+="?domain="+e+"&username="+r,t(null,i)})}function i(e,t){s._getUser(e,function(e,r){e||r.error?t(new Error("Authentication info server unreachable")):t(null,r.body)})}var s=this;r=r.toLowerCase(),t.waterfall([o,i],n)},r.AuthInfo=i}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/authinfo.js","/")},{"./rippletxt":19,"1YiZ5S":6,async:1,buffer:3,superagent:12}],16:[function(e,t,r){(function(){function t(e){e||(e={}),this.device_id=e.device_id,this.url=e.url,this.id=e.blob_id,this.key=e.key,this.identity=new g(this),this.data={}}function n(e,t){var r=i.deriveRecoveryEncryptionKeyFromSecret(e);return i.decrypt(r,t)}function o(e,r){return/(number|string)/.test(typeof e[0])?e=[e]:1===e.length&&Array.isArray(e[0])&&/(number|string)/.test(typeof e[0][0])||Array.isArray(e[0])&&(e=e[0]),e=e.map(function(e){if("string"==typeof e[0]&&(e[0]=t.ops[e[0]]),"number"!=typeof e[0])throw new Error("Invalid op in subcommand");if("string"!=typeof e[1])throw new Error("Invalid path in subcommand");return e}),r?1===e.length?e[0]:[e]:e}var i=e("./crypt").Crypt,s=e("./signedrequest").SignedRequest,a=e("superagent"),u=e("extend"),l=e("async"),c={};t.ops={noop:0,set:16,unset:17,extend:18,push:32,pop:33,shift:34,unshift:35,filter:36},t.opsReverseMap=[];for(var f in t.ops)t.opsReverseMap[t.ops[f]]=f;var d="identityVault",p=["name","entityType","email","phone","address","nationalID","birthday","birthplace"],h=["individual","organization","corporation"],y=["contact","line1","line2","city","region","postalCode","country"],m=["number","type","country"],b=["ssn","taxID","passport","driversLicense","other"];t.prototype.init=function(e){var t,r=this;-1===r.url.indexOf("://")&&(r.url="http://"+t),t=r.url+"/v1/blob/"+r.id,this.device_id&&(t+="?device_id="+this.device_id),a.get(t,function(t,n){if(t)return e(new Error(t.message||"Could not retrieve blob"));if(!n.body)return e(new Error("Could not retrieve blob"));if(n.body.twofactor)return n.body.twofactor.blob_id=r.id,n.body.twofactor.blob_url=r.url,n.body.twofactor.device_id=r.device_id,n.body.twofactor.blob_key=r.key,e(n.body);if("success"!==n.body.result)return e(new Error("Incorrect username or password"));if(r.revision=n.body.revision,r.encrypted_secret=n.body.encrypted_secret,r.identity_id=n.body.identity_id,r.id_token=n.body.id_token,r.missing_fields=n.body.missing_fields,!r.decrypt(n.body.blob))return e(new Error("Error while decrypting blob"));if(n.body.patches&&n.body.patches.length){var o=!0;n.body.patches.forEach(function(e){o=o&&r.applyEncryptedPatch(e)}),o&&r.consolidate()}e(null,r)}).timeout(8e3)},t.prototype.consolidate=function(e){"function"!=typeof e&&(e=function(){});var t=this.encrypt(),r={method:"POST",url:this.url+"/v1/blob/consolidate",dataType:"json",data:{blob_id:this.id,data:t,revision:this.revision}},n=new s(r),o=n.signHmac(this.data.auth_secret,this.id);a.post(o.url).send(o.data).end(function(t,r){t?e(new Error("Failed to consolidate blob - XHR error")):r.body&&"success"===r.body.result?e(null,r.body):e(new Error("Failed to consolidate blob"))})},t.prototype.applyEncryptedPatch=function(e){try{var t=JSON.parse(i.decrypt(this.key,e)),r=t.shift(),n=t.shift();return this.applyUpdate(r,n,t),this.revision++,!0}catch(o){return!1}},t.prototype.encryptSecret=function(e,t){return i.encrypt(e,t)},t.prototype.decryptSecret=function(e){return i.decrypt(e,this.encrypted_secret)},t.prototype.decrypt=function(e){try{return this.data=JSON.parse(i.decrypt(this.key,e)),this}catch(t){return!1}},t.prototype.encrypt=function(){return i.encrypt(this.key,JSON.stringify(this.data))},t.prototype.encryptBlobCrypt=function(e,t){var r=i.deriveRecoveryEncryptionKeyFromSecret(e);return i.encrypt(r,t)},t.prototype.set=function(e,t,r){return e=="/"+d&&this.data[d]?r(new Error("Cannot overwrite Identity Vault")):(this.applyUpdate("set",e,[t]),void this.postUpdate("set",e,[t],r))},t.prototype.unset=function(e,t){return e=="/"+d?t(new Error("Cannot remove Identity Vault")):(this.applyUpdate("unset",e,[]),void this.postUpdate("unset",e,[],t))},t.prototype.extend=function(e,t,r){this.applyUpdate("extend",e,[t]),this.postUpdate("extend",e,[t],r)},t.prototype.unshift=function(e,t,r){this.applyUpdate("unshift",e,[t]),this.postUpdate("unshift",e,[t],r)},t.prototype.filter=function(e,t,r,n,i){var s=Array.prototype.slice.apply(arguments);"function"==typeof s[s.length-1]&&(i=s.pop()),s.shift(),s=s.slice(0,2).concat(o(s.slice(2),!0)),this.applyUpdate("filter",e,s),this.postUpdate("filter",e,s,i)},t.prototype.applyUpdate=function(e,r,n){if("number"==typeof e&&(e=t.opsReverseMap[e]),"string"!=typeof e)throw new Error("Blob update op code must be a number or a valid op id string");var o=r.split("/"),i=o.shift();if(""!==i)throw new Error("Invalid JSON pointer: "+r);this._traverse(this.data,o,r,e,n)},t.prototype._traverse=function(e,t,r,n,i){var s=this,a=s.unescapeToken(t.shift());if(Array.isArray(e)){if("-"===a)a=e.length;else if(a%1!==0&&a>=0)throw new Error(0/0)}else{if("object"!=typeof e)return null;if(!e.hasOwnProperty(a))if("set"===n)e[a]={};else{if("unshift"!==n)return null;e[a]=[]}}if(0!==t.length)return this._traverse(e[a],t,r,n,i);switch(n){case"set":e[a]=i[0];break;case"unset":Array.isArray(e)?e.splice(a,1):delete e[a];break;case"extend":if("object"!=typeof e[a])throw new Error("Tried to extend a non-object");u(!0,e[a],i[0]);break;case"unshift":if("undefined"==typeof e[a])e[a]=[];else if(!Array.isArray(e[a]))throw new Error('Operator "unshift" must be applied to an array.');e[a].unshift(i[0]);break;case"filter":Array.isArray(e[a])&&e[a].forEach(function(e,t){if("object"==typeof e&&e.hasOwnProperty(i[0])&&e[i[0]]===i[1]){var n=r+"/"+t,a=o(i.slice(2));a.forEach(function(e){var t=e[0],r=n+e[1];s.applyUpdate(t,r,e.slice(2))})}});break;default:throw new Error("Unsupported op "+n)}},t.prototype.escapeToken=function(e){return e.replace(/[~\/]/g,function(e){return"~"===e?"~0":"~1"})},t.prototype.unescapeToken=function(e){return e.replace(/~./g,function(e){switch(e){case"~0":return"~";case"~1":return"/"}throw new Error("Invalid tilde escape: "+e)})},t.prototype.postUpdate=function(e,r,n,o){if("function"!=typeof o&&(o=function(){}),"string"==typeof e&&(e=t.ops[e]),"number"!=typeof e)throw new Error("Blob update op code must be a number or a valid op id string");if(0>e||e>255)throw new Error("Blob update op code out of bounds");n.unshift(r),n.unshift(e);var u={method:"POST",url:this.url+"/v1/blob/patch",dataType:"json",data:{blob_id:this.id,patch:i.encrypt(this.key,JSON.stringify(n))}},l=new s(u),c=l.signHmac(this.data.auth_secret,this.id);a.post(c.url).send(c.data).end(function(e,t){e?o(new Error("Patch could not be saved - XHR error")):t.body&&"success"===t.body.result?o(null,t.body):o(new Error("Patch could not be saved - bad result"))})},t.prototype.get2FA=function(e){var t={method:"GET",url:this.url+"/v1/blob/"+this.id+"/2FA?device_id="+this.device_id},r=new s(t),n=r.signHmac(this.data.auth_secret,this.id);a.get(n.url).end(function(t,r){t?e(t):r.body&&"success"===r.body.result?e(null,r.body):e(r.body&&"error"===r.body.result?new Error(r.body.message):new Error("Unable to retrieve settings."))})},t.prototype.set2FA=function(e,t){var r={method:"POST",url:this.url+"/v1/blob/"+this.id+"/2FA",data:{enabled:e.enabled,phone:e.phone,country_code:e.country_code}},n=new s(r),o=n.signAsymmetric(e.masterkey,this.data.account_id,this.id);a.post(o.url).send(o.data).end(function(e,r){e?t(e):r.body&&"success"===r.body.result?t(null,r.body):t(r.body&&"error"===r.body.result?r.body:new Error("Unable to update settings."))})};var g=function(e){this._getBlob=function(){return e}};g.prototype.getFullAddress=function(e){var t=this._getBlob();if(!(t&&t.data&&t.data[d]&&t.data[d].address))return"";var r=this.get("address",e),n="";return r.value.contact&&(n+=r.value.contact),r.value.line1&&(n+=" "+r.value.line1),r.value.line2&&(n+=" "+r.value.line2),r.value.city&&(n+=" "+r.value.city),r.value.region&&(n+=" "+r.value.region),r.value.postalCode&&(n+=" "+r.value.postalCode),r.value.country&&(n+=" "+r.value.country),n},g.prototype.getAll=function(e){var t=this._getBlob();if(!t||!t.data||!t.data[d])return{};var r={},n=t.data[d];for(var o in n)r[o]=this.get(o,e);return r},g.prototype.get=function(e,t){function r(e,t){var r,n={encrypted:!0};try{r=i.decrypt(e,t.value)}catch(o){return n.value=t.value,n.error=o,n}try{n.value=JSON.parse(r)}catch(o){n.value=r}return n}var n=this._getBlob();if(!n||!n.data||!n.data[d])return null;var o=n.data[d][e];return o&&o.encrypted?r(t,o):o?o:null},g.prototype.set=function(e,t,r,n){function o(e){return c?c.data?c.data[d]?e(null):void c.set("/"+d,{},function(t){return e(t?t:null)
}):n(new Error("Invalid Blob")):n(new Error("Identity must be associated with a blob"))}function s(n){var o={};o[e]={encrypted:t?!0:!1,value:t?a(t,r):r},u._getBlob().extend("/"+d,o,n)}function a(e,t){return"object"==typeof t&&(t=JSON.stringify(t)),i.encrypt(e,t)}var u=this,c=this._getBlob();if(n||(n=function(){}),-1===p.indexOf(e))return n(new Error("invalid identity field"));if("address"===e){if("object"!=typeof r)return n(new Error("address must be an object"));for(var f in r)if(-1===y.indexOf(f))return n(new Error("invalid address field"))}else if("nationalID"===e){if("object"!=typeof r)return n(new Error("nationalID must be an object"));for(var g in r){if(-1===m.indexOf(g))return n(new Error("invalid nationalID field"));if("type"===g&&-1===b.indexOf(r[g]))return n(new Error("invalid nationalID type"))}}else if("entityType"===e&&-1===h.indexOf(r))return n(new Error("invalid entity type"));l.waterfall([o,s],n)},g.prototype.unset=function(e,t,r){r||(r=function(){});var n=this.get(e,t);return n&&n.error?r(n.error):void this._getBlob().unset("/"+d+"/"+e,r)},r.Blob=t,c.getRippleName=function(e,t,r){return i.isValidAddress(t)&&i.isValidAddress(t)?void a.get(e+"/v1/user/"+t,function(e,t){e?r(new Error("Unable to access vault sever")):t.body&&t.body.username?r(null,t.body.username):r(t.body&&t.body.exists===!1?new Error("No ripple name for this address"):new Error("Unable to determine if ripple name exists"))}):r(new Error("Invalid ripple address"))},c.get=function(e,r){var n=new t(e);n.init(r)},c.requestToken=function(e,t,r,n){var o={method:"GET",url:e+"/v1/blob/"+t+"/2FA/requestToken"};r&&r instanceof Function?n=r:r&&(o.url+="?force_sms=true"),a.get(o.url).end(function(e,t){e?n(e):t.body&&"success"===t.body.result?n(null,t.body):n(t.body&&"error"===t.body.result?new Error(t.body.message):new Error("Unable to request authentication token."))})},c.verifyToken=function(e,t){var r={method:"POST",url:e.url+"/v1/blob/"+e.id+"/2FA/verifyToken",data:{device_id:e.device_id,token:e.token,remember_me:e.remember_me}};a.post(r.url).send(r.data).end(function(e,r){e?t(e):r.body&&"success"===r.body.result?t(null,r.body):t(r.body&&"error"===r.body.result?new Error(r.body.message):new Error("Unable to verify authentication token."))})},c.verify=function(e,t,r,n){e+="/v1/user/"+t+"/verify/"+r,a.get(e,function(e,t){e?n(new Error("Failed to verify the account - XHR error")):t.body&&"success"===t.body.result?n(null,t.body):n(new Error("Failed to verify the account"))})},c.resendEmail=function(e,t){var r={method:"POST",url:e.url+"/v1/user/email",data:{blob_id:e.id,username:e.username,email:e.email,hostlink:e.activateLink}},n=new s(r),o=n.signAsymmetric(e.masterkey,e.account_id,e.id);a.post(o.url).send(o.data).end(function(e,r){e?(console.log("error:","resendEmail:",e),t(new Error("Failed to resend the token"))):r.body&&"success"===r.body.result?t(null,r.body):r.body&&"error"===r.body.result?(console.log("error:","resendEmail:",r.body.message),t(new Error("Failed to resend the token"))):t(new Error("Failed to resend the token"))})},c.recoverBlob=function(e,r){function o(o){var i={url:e.url,blob_id:o.body.blob_id,key:n(e.masterkey,o.body.encrypted_blobdecrypt_key)},s=new t(i);if(s.revision=o.body.revision,s.encrypted_secret=o.body.encrypted_secret,!s.decrypt(o.body.blob))return r(new Error("Error while decrypting blob"));if(o.body.patches&&o.body.patches.length){var a=!0;o.body.patches.forEach(function(e){a=a&&s.applyEncryptedPatch(e)}),a&&s.consolidate()}r(null,s)}var i=String(e.username).trim(),u={method:"GET",url:e.url+"/v1/user/recov/"+i},l=new s(u),c=l.signAsymmetricRecovery(e.masterkey,i);a.get(c.url).end(function(e,t){e?r(e):t.body&&"success"===t.body.result?t.body.encrypted_blobdecrypt_key?o(t):r(new Error("Missing encrypted blob decrypt key.")):r(t.body&&"error"===t.body.result?new Error(t.body.message):new Error("Could not recover blob"))})},c.updateKeys=function(e,t){var r=e.blob.id;e.blob.id=e.keys.id,e.blob.key=e.keys.crypt,e.blob.encrypted_secret=e.blob.encryptSecret(e.keys.unlock,e.masterkey);var n={method:"POST",url:e.blob.url+"/v1/user/"+e.username+"/updatekeys",data:{blob_id:e.blob.id,data:e.blob.encrypt(),revision:e.blob.revision,encrypted_secret:e.blob.encrypted_secret,encrypted_blobdecrypt_key:e.blob.encryptBlobCrypt(e.masterkey,e.keys.crypt)}},o=new s(n),i=o.signAsymmetric(e.masterkey,e.blob.data.account_id,r);a.post(i.url).send(i.data).end(function(e,r){e?(console.log("error:","updateKeys:",e),t(new Error("Failed to update blob - XHR error"))):r.body&&"success"===r.body.result?t(null,r.body):(console.log("error:","updateKeys:",r.body?r.body.message:null),t(new Error("Failed to update blob - bad result")))})},c.rename=function(e,t){var r=e.blob.id;e.blob.id=e.keys.id,e.blob.key=e.keys.crypt,e.blob.encryptedSecret=e.blob.encryptSecret(e.keys.unlock,e.masterkey);var n={method:"POST",url:e.blob.url+"/v1/user/"+e.username+"/rename",data:{blob_id:e.blob.id,username:e.new_username,data:e.blob.encrypt(),revision:e.blob.revision,encrypted_secret:e.blob.encryptedSecret,encrypted_blobdecrypt_key:e.blob.encryptBlobCrypt(e.masterkey,e.keys.crypt)}},o=new s(n),i=o.signAsymmetric(e.masterkey,e.blob.data.account_id,r);a.post(i.url).send(i.data).end(function(e,r){e?(console.log("error:","rename:",e),t(new Error("Failed to rename"))):r.body&&"success"===r.body.result?t(null,r.body):r.body&&"error"===r.body.result?(console.log("error:","rename:",r.body.message),t(new Error("Failed to rename"))):t(new Error("Failed to rename"))})},c.create=function(e,r){var n={url:e.url,blob_id:e.id,key:e.crypt},o=new t(n);o.revision=0,o.data={auth_secret:i.createSecret(8),account_id:i.getAddress(e.masterkey),email:e.email,contacts:[],created:(new Date).toJSON()},o.encrypted_secret=o.encryptSecret(e.unlock,e.masterkey),e.oldUserBlob&&(o.data.contacts=e.oldUserBlob.data.contacts);var u={method:"POST",url:e.url+"/v1/user",data:{blob_id:e.id,username:e.username,address:o.data.account_id,auth_secret:o.data.auth_secret,data:o.encrypt(),email:e.email,hostlink:e.activateLink,domain:e.domain,encrypted_blobdecrypt_key:o.encryptBlobCrypt(e.masterkey,e.crypt),encrypted_secret:o.encrypted_secret}},l=new s(u),c=l.signAsymmetric(e.masterkey,o.data.account_id,e.id);a.post(c.url).send(c.data).end(function(e,t){if(e)r(e);else if(t.body&&"success"===t.body.result)o.identity_id=t.body.identity_id,r(null,o,t.body);else if(t.body&&"error"===t.body.result){var e=new Error(t.body.message);t.body.missing&&(e.missing=t.body.missing),r(e)}else r(new Error("Could not create blob"))})},c.deleteBlob=function(e,t){var r={method:"DELETE",url:e.url+"/v1/user/"+e.username},n=new s(r),o=n.signAsymmetric(e.masterkey,e.account_id,e.blob_id);a.del(o.url).end(function(e,r){e?t(e):r.body&&"success"===r.body.result?t(null,r.body):r.body&&"error"===r.body.result?t(new Error(r.body.message)):r.error&&404===r.error.status?t(new Error("Blob not found")):(r.error&&console.log(r.error.toString()),t(new Error("Could not delete blob")))})},c.updateProfile=function(e,t){var r={method:"POST",url:e.url+"/v1/profile/",dataType:"json",data:e.profile},n=new s(r),o=n.signHmac(e.auth_secret,e.blob_id);a.post(o.url).send(o.data).end(function(e,r){e?(console.log("error:","updateProfile:",e),t(new Error("Failed to update profile - XHR error"))):r.body&&"success"===r.body.result?t(null,r.body):r.body?(console.log("error:","updateProfile:",r.body),t(new Error("Failed to update profile"))):t(new Error("Failed to update profile"))})},c.getProfile=function(e,t){var r={method:"GET",url:e.url+"/v1/profile/"},n=new s(r),o=n.signHmac(e.auth_secret,e.blob_id);a.get(o.url).send(o.data).end(function(e,r){e?(console.log("error:","getProfile:",e),t(new Error("Failed to get profile - XHR error"))):r.body&&"success"===r.body.result?t(null,r.body):r.body?(console.log("error:","getProfile:",r.body),t(new Error("Failed to get profile"))):t(new Error("Failed to get profile"))})},c.getAttestation=function(e,t){var r={};e.phone&&(r.phone=e.phone),e.email&&(r.email=e.email);var n={method:"POST",url:e.url+"/v1/attestation/"+e.type,dataType:"json",data:r},o=new s(n),i=o.signHmac(e.auth_secret,e.blob_id);a.post(i.url).send(i.data).end(function(e,r){e?(console.log("error:","attest:",e),t(new Error("attestation error - XHR error"))):r.body&&"success"===r.body.result?(r.body.attestation&&(r.body.decoded=c.parseAttestation(r.body.attestation)),t(null,r.body)):r.body?(console.log("error:","attestation:",r.body),t(new Error("attestation error: "+r.body.message||""))):t(new Error("attestation error"))})},c.getAttestationSummary=function(e,t){var r={method:"GET",url:e.url+"/v1/attestation/summary",dataType:"json"};e.full&&(r.url+="?full=true");var n=new s(r),o=n.signHmac(e.auth_secret,e.blob_id);a.get(o.url).send(o.data).end(function(e,r){e?(console.log("error:","attest:",e),t(new Error("attestation error - XHR error"))):r.body&&"success"===r.body.result?(r.body.attestation&&(r.body.decoded=c.parseAttestation(r.body.attestation)),t(null,r.body)):r.body?(console.log("error:","attestation:",r.body),t(new Error("attestation error: "+r.body.message||""))):t(new Error("attestation error"))})},c.updateAttestation=function(e,t){var r={};e.phone&&(r.phone=e.phone),e.profile&&(r.profile=e.profile),e.email&&(r.email=e.email),e.token&&(r.token=e.token),e.answers&&(r.answers=e.answers);var n={method:"POST",url:e.url+"/v1/attestation/"+e.type+"/update",dataType:"json",data:r},o=new s(n),i=o.signHmac(e.auth_secret,e.blob_id);a.post(i.url).send(i.data).end(function(e,r){e?(console.log("error:","attest:",e),t(new Error("attestation error - XHR error"))):r.body&&"success"===r.body.result?(r.body.attestation&&(r.body.decoded=c.parseAttestation(r.body.attestation)),t(null,r.body)):r.body?(console.log("error:","attestation:",r.body),t(new Error("attestation error: "+r.body.message||""))):t(new Error("attestation error"))})},c.parseAttestation=function(e){var t,r=decodeURIComponent(e).split(".");try{t={header:JSON.parse(i.decodeBase64(r[0])),payload:JSON.parse(i.decodeBase64(r[1])),signature:r[2]}}catch(n){console.log("invalid attestation:",n)}return t},r.BlobClient=c}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/blob.js","/")},{"./crypt":17,"./signedrequest":20,"1YiZ5S":6,async:1,buffer:3,extend:2,superagent:12}],17:[function(e,t,r){(function(){function t(e,t){var r=t<<3;"string"==typeof e&&(e=i.codec.utf8String.toBits(e));for(var n=0,o=[];i.bitArray.bitLength(o)<r;){var s=i.hash.sha512.hash(i.bitArray.concat([n],e));o=i.bitArray.concat(o,s),n++}return o=i.bitArray.clamp(o,r)}function n(e,t){var r=new i.misc.hmac(e,i.hash.sha512);return i.codec.hex.fromBits(i.bitArray.bitSlice(r.encrypt(t),0,256))}function o(e){for(var t=0;8>t;t++)i.random.addEntropy(Math.random(),32,"Math.random()");return i.random.randomWords(e)}var i=ripple.sjcl,s=ripple.Base,a=ripple.Seed,u=ripple.UInt160,l=ripple.UInt256,c=e("superagent"),f=(e("querystring"),e("extend")),d=(e("url"),{}),p={cipher:"aes",mode:"ccm",ts:64,ks:256,iter:1e3};d.derive=function(e,r,o,s,a){var u;u="login"===r?["id","crypt"]:["unlock"];var l=new i.bn(String(e.exponent)),f=new i.bn(String(e.modulus)),d=new i.bn(String(e.alpha)),p=["PAKDF_1_0_0",e.host.length,e.host,o.length,o,r.length,r].join(":")+":",h=Math.ceil(Math.min(7+f.bitLength()>>>3,256)/8),y=t(p,h),m=i.codec.hex.fromBits(y),b=new i.bn(String(m)).setBitM(0),g=[p,s.length,s].join(":")+":",v=7+f.bitLength()>>>3,w=t(g,v),_=i.codec.hex.fromBits(w),E=new i.bn(String(_)).mod(f);1!==E.jacobi(f)&&(E=E.mul(d).mod(f));for(var k;k=i.bn.random(f,0),1!==k.jacobi(f););var A=k.powermodMontgomery(b.mul(l),f),S=E.mulmod(A,f),x=i.codec.hex.fromBits(S.toBits());c.post(e.url).send({info:p,signreq:x}).end(function(t,r){if(t||!r)return a(new Error("Could not query PAKDF server "+e.host));var o=r.body||r.text?JSON.parse(r.text):{};if("success"!==o.result)return a(new Error("Could not query PAKDF server "+e.host));var s=new i.bn(String(o.signres)),l=k.inverseMod(f),c=s.mulmod(l,f),d=c.toBits(),p={};u.forEach(function(e){p[e]=n(d,e)}),a(null,p)})},d.encrypt=function(e,t){e=i.codec.hex.toBits(e);var r=f(!0,{},p),n=JSON.parse(i.encrypt(e,t,r)),o=[i.bitArray.partial(8,0)],s=i.codec.base64.toBits(n.iv),a=i.codec.base64.toBits(n.ct),u=i.bitArray.concat(o,s);return u=i.bitArray.concat(u,a),i.codec.base64.fromBits(u)},d.decrypt=function(e,t){e=i.codec.hex.toBits(e);var r=i.codec.base64.toBits(t),n=i.bitArray.extract(r,0,8);if(0!==n)throw new Error("Unsupported encryption version: "+n);var o=f(!0,{},p,{iv:i.codec.base64.fromBits(i.bitArray.bitSlice(r,8,136)),ct:i.codec.base64.fromBits(i.bitArray.bitSlice(r,136))});return i.decrypt(e,JSON.stringify(o))},d.isValidAddress=function(e){return u.is_valid(e)},d.createSecret=function(e){return i.codec.hex.fromBits(o(e))},d.createMaster=function(){return s.encode_check(33,i.codec.bytes.fromBits(o(4)))},d.getAddress=function(e){return a.from_json(e).get_key().get_address().to_json()},d.hashSha512=function(e){return i.codec.hex.fromBits(i.hash.sha512.hash(e))},d.hashSha512Half=function(e){return l.from_hex(d.hashSha512(e).substr(0,64))},d.signString=function(e,t){var r=new i.misc.hmac(i.codec.hex.toBits(e),i.hash.sha512);return i.codec.hex.fromBits(r.mac(t))},d.deriveRecoveryEncryptionKeyFromSecret=function(e){var t=a.from_json(e).to_bits(),r=new i.misc.hmac(t,i.hash.sha512),n=r.mac("ripple/hmac/recovery_encryption_key/v1");return n=i.bitArray.bitSlice(n,0,256),i.codec.hex.fromBits(n)},d.base64ToBase64Url=function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,"")},d.base64UrlToBase64=function(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";return e},d.decodeBase64=function(e){return i.codec.utf8String.fromBits(i.codec.base64.toBits(e))},r.Crypt=d}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/crypt.js","/")},{"1YiZ5S":6,buffer:3,extend:2,querystring:10,superagent:12,url:11}],18:[function(e){(function(){window.rippleVaultClient=window.rippleVaultClient||e("./vaultclient")}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_761b1d3e.js","/")},{"./vaultclient":21,"1YiZ5S":6,buffer:3}],19:[function(e,t,r){(function(){var t=e("superagent"),n=ripple.Currency,o={txts:{}};o.urlTemplates=["https://{{domain}}/ripple.txt","https://www.{{domain}}/ripple.txt","https://ripple.{{domain}}/ripple.txt","http://{{domain}}/ripple.txt","http://www.{{domain}}/ripple.txt","http://ripple.{{domain}}/ripple.txt"],o.get=function(e,r){var n=this;return n.txts[e]?r(null,n.txts[e]):void function i(s){var a=o.urlTemplates[s];return a?(a=a.replace("{{domain}}",e),console.log(a),void t.get(a,function(t,o){if(t||!o.text)return i(++s);var a=n.parse(o.text);n.txts[e]=a,r(null,a)})):r(new Error("No ripple.txt found"))}(0)},o.parse=function(e){var t="",r={};e=e.replace(/\r?\n/g,"\n").split("\n");for(var n=0,o=e.length;o>n;n++){var i=e[n];i.length&&"#"!==i[0]&&("["===i[0]&&"]"===i[i.length-1]?(t=i.slice(1,i.length-1),r[t]=[]):(i=i.replace(/^\s+|\s+$/g,""),r[t]&&r[t].push(i)))}return r},o.extractDomain=function(e){return match=/[^.]*\.[^.]{2,3}(?:\.[^.]{2,3})?([^.\?][^\?.]+?)?$/.exec(e),match&&match[0]?match[0]:e},o.getCurrencies=function(e,t){function r(e,t){s.get(e,function(r,o){if(r)return t(r);if(r||!o.currencies||!o.accounts)return t(null,[]);var i=o.accounts[0],s=[];o.currencies.forEach(function(t){s.push({issuer:i,currency:n.from_json(t),domain:e})}),t(null,s)})}var i=o.extractDomain(e),s=this;r(i,function(n,o){return n?r(e,t):t(null,o)})},r.RippleTxt=o}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/rippletxt.js","/")},{"1YiZ5S":6,buffer:3,superagent:12}],20:[function(e,t,r){(function(){function t(e){if(n(e)){var r,o={},i=Object.keys(e).sort();for(var s in i)r=i[s],Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=t(e[r]));return o}return Array.isArray(e)?e.map(t):e}function n(e){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;if(!e||"[object Object]"!==r.call(e)||e.nodeType||e.setInterval)return!1;var n=t.call(e,"constructor"),o=t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!o)return!1;var i;for(i in e);return void 0===i||t.call(e,i)}var o=e("./crypt").Crypt,i=ripple.Message,s=e("url"),a=e("extend"),u=e("querystring"),l=function(e){this.config=a(!0,{},e),this.config.data||(this.config.data={})};l.prototype.getStringToSign=function(e,r,n){var i=JSON.stringify(t(this.config.data)),s=[this.config.method||"GET",e.pathname||"",e.search||"","","",o.hashSha512(i).toLowerCase()].join("\n");return[n,r,o.hashSha512(s).toLowerCase()].join("\n")},l.prototype.signHmac=function(e,t){var r=a(!0,{},this.config),n=s.parse(r.url),i=c(),l="RIPPLE1-HMAC-SHA512",f=this.getStringToSign(n,i,l),d=o.signString(e,f),p=u.stringify({signature:o.base64ToBase64Url(d),signature_date:i,signature_blob_id:t,signature_type:l});return r.url+=(n.search?"&":"?")+p,r},l.prototype.signAsymmetric=function(e,t,r){var n=a(!0,{},this.config),l=s.parse(n.url),f=c(),d="RIPPLE1-ECDSA-SHA512",p=this.getStringToSign(l,f,d),h=i.signMessage(p,e),y=u.stringify({signature:o.base64ToBase64Url(h),signature_date:f,signature_blob_id:r,signature_account:t,signature_type:d});return n.url+=(l.search?"&":"?")+y,n},l.prototype.signAsymmetricRecovery=function(e,t){var r=a(!0,{},this.config),n=s.parse(r.url),l=c(),f="RIPPLE1-ECDSA-SHA512",d=this.getStringToSign(n,l,f),p=i.signMessage(d,e),h=u.stringify({signature:o.base64ToBase64Url(p),signature_date:l,signature_username:t,signature_type:f});return r.url+=(n.search?"&":"?")+h,r};var c=function(){function e(e){return(0>e||e>9?"":"0")+e}return function(){var t=new Date;return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+".000Z"}}();r.SignedRequest=l}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/signedrequest.js","/")},{"./crypt":17,"1YiZ5S":6,buffer:3,extend:2,querystring:10,url:11}],21:[function(e,t,r){(function(){function t(e){e||(e={}),"string"==typeof e&&(e={domain:e}),this.domain=e.domain||"ripple.com",this.infos={}}var n=e("async"),o=e("./blob").BlobClient,i=e("./blob").Blob,s=e("./authinfo").AuthInfo,a=e("./rippletxt").RippleTxt,u=e("./crypt").Crypt;t.prototype.getAuthInfo=function(e,t){s.get(this.domain,e,function(e,r){return e?t(e):3!==r.version?t(new Error("This wallet is incompatible with this version of the vault-client.")):r.pakdf?"string"!=typeof r.blobvault?t(new Error("No blobvault specified in the authinfo.")):void t(null,r):t(new Error("No settings for PAKDF in auth packet."))})},t.prototype._deriveLoginKeys=function(e,t,r){var n=e.username.toLowerCase().replace(/-/g,"");u.derive(e.pakdf,"login",n,t,function(n,o){n?r(n):r(null,e,t,o)})},t.prototype._deriveUnlockKey=function(e,t,r,n){var o=e.username.toLowerCase().replace(/-/g,"");u.derive(e.pakdf,"unlock",o,t,function(t,o){return t?(console.log("error","derive:",t),n(t)):(r||(r={}),r.unlock=o.unlock,void n(null,e,r))})},t.prototype.getRippleName=function(e,t,r){t?o.getRippleName(t,e,r):r(new Error("Blob vault URL is required"))},t.prototype.exists=function(e,t){s.get(this.domain,e.toLowerCase(),function(e,r){e?t(e):t(null,!!r.exists)})},t.prototype.login=function(e,t,r,i){function s(r){c.getAuthInfo(e,function(e,n){return n&&!n.exists?r(new Error("User does not exist.")):r(e,n,t)})}function a(e,t,n,i){var s={url:e.blobvault,blob_id:n.id,key:n.crypt,device_id:r};o.get(s,function(r,o){return r?i(r):(c.infos[n.id]=e,o.missing_fields&&o.missing_fields.encrypted_blobdecrypt_key&&(console.log("migration: saving encrypted blob decrypt key"),e.blob=o,c._deriveUnlockKey(e,t,n,l)),void i(null,{blob:o,username:e.username,verified:e.emailVerified,emailVerified:e.emailVerified,profileVerified:e.profile_verified,identityVerified:e.identity_verified}))})}function l(e,t,r){if(!e&&r.unlock){var n;try{n=u.decrypt(r.unlock,t.blob.encrypted_secret)}catch(i){return console.log("error:","decrypt:",i)}options={username:t.username,blob:t.blob,masterkey:n,keys:r},o.updateKeys(options,function(e){e&&console.log("error:","updateKeys:",e)})}}var c=this,f=[s,c._deriveLoginKeys,a];n.waterfall(f,i)},t.prototype.relogin=function(e,t,r,n,i){if(!e&&this.infos[t]&&(e=this.infos[t].blobvault),!e)return i(new Error("Blob vault URL is required"));var s={url:e,blob_id:t,key:r,device_id:n};o.get(s,function(e,t){e?i(e):i(null,{blob:t})})},t.prototype.unlock=function(e,t,r,o){function i(r){a.getAuthInfo(e,function(e,n){return n&&!n.exists?r(new Error("User does not exist.")):r(e,n,t,{})})}function s(e,t,n){var o;try{o=u.decrypt(t.unlock,r)}catch(i){return n(i)}n(null,{keys:t,secret:o})}var a=this,l=[i,a._deriveUnlockKey,s];n.waterfall(l,o)},t.prototype.loginAndUnlock=function(e,t,r,o){function i(n){l.login(e,t,r,function(e,r){if(e)return n(e);if(!r.blob||!r.blob.encrypted_secret)return n(new Error("Unable to retrieve blob and secret."));if(!r.blob.id||!r.blob.key)return n(new Error("Unable to retrieve keys."));var o=l.infos[r.blob.id];return o?void n(null,o,t,r.blob):n(new Error("Unable to find authInfo"))})}function s(e,t,r,n){l._deriveUnlockKey(e,t,null,function(e,t,o){n(e,o.unlock,t,r)})}function a(e,t,r,n){var o;try{o=u.decrypt(e,r.encrypted_secret)}catch(i){return n(i)}n(null,{blob:r,unlock:e,secret:o,username:t.username,verified:t.emailVerified,emailVerified:t.emailVerified,profileVerified:t.profile_verified,identityVerified:t.identity_verified})}var l=this,c=[i,s,a];n.waterfall(c,o)},t.prototype.verify=function(e,t,r){var n=this;n.getAuthInfo(e,function(n,i){return n?r(n):void o.verify(i.blobvault,e.toLowerCase(),t,r)})},t.prototype.changePassword=function(e,t){function r(t){s.getAuthInfo(e.username,function(e,r){return t(e,r,a)})}function i(t,r,n){e.keys=r,o.updateKeys(e,n)}var s=this,a=String(e.password).trim(),u=[r,s._deriveLoginKeys,s._deriveUnlockKey,i];n.waterfall(u,t)},t.prototype.rename=function(e,t){function r(e){s.getAuthInfo(a,function(t,r){return r&&r.exists?e(new Error("username already taken.")):(r.username=a,e(t,r,u))})}function i(t,r,n){e.keys=r,o.rename(e,n)}var s=this,a=String(e.new_username).trim(),u=String(e.password).trim(),l=[r,s._deriveLoginKeys,s._deriveUnlockKey,i];n.waterfall(l,t)},t.prototype.register=function(e,t){function r(e){s.getAuthInfo(a,function(t,r){return e(t,r,l)})}function i(t,r,n){var i={url:t.blobvault,id:r.id,crypt:r.crypt,unlock:r.unlock,username:a,email:e.email,masterkey:e.masterkey||u.createMaster(),activateLink:e.activateLink,oldUserBlob:e.oldUserBlob,domain:e.domain};o.create(i,function(e,t){e?n(e):n(null,{blob:t,username:a})})}var s=this,a=String(e.username).trim(),l=String(e.password).trim(),c=s.validateUsername(a);if(!c.valid)return t(new Error("invalid username."));var f=[r,s._deriveLoginKeys,s._deriveUnlockKey,i];n.waterfall(f,t)},t.prototype.validateUsername=function(e){e=String(e).trim();var t={valid:!1,reason:""};return e.length<2?t.reason="tooshort":e.length>20?t.reason="toolong":/^[a-zA-Z0-9\-]+$/.exec(e)?/^-/.exec(e)?t.reason="starthyphen":/-$/.exec(e)?t.reason="endhyphen":/--/.exec(e)?t.reason="multhyphen":t.valid=!0:t.reason="charset",t},t.prototype.generateDeviceID=function(){return u.createSecret(4)},t.prototype.resendEmail=o.resendEmail,t.prototype.recoverBlob=o.recoverBlob,t.prototype.deleteBlob=o.deleteBlob,t.prototype.requestToken=o.requestToken,t.prototype.verifyToken=o.verifyToken,t.prototype.getAttestation=o.getAttestation,t.prototype.updateAttestation=o.updateAttestation,t.prototype.getAttestationSummary=o.getAttestationSummary,r.VaultClient=t,r.AuthInfo=s,r.RippleTxt=a,r.Blob=i}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/vaultclient.js","/")},{"./authinfo":15,"./blob":16,"./crypt":17,"./rippletxt":19,"1YiZ5S":6,async:1,buffer:3}]},{},[18]);